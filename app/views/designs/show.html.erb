<p style="color: green"><%= notice %></p>

<%= render @design %>

<div>
 


<p><%= @design.likes.count %> <%= (@design.likes.count) == 1 ? 'Like' : 'Likes'%></p>

<% if current_user && @design && @design.ratings.present? %>
<p>Rating: <%= @design.ratings.first.value %></p>

  <!-- Edit Rating form 
  <%= form_with(model: [@design, @design.ratings], url: design_ratings_path(@design, @design.ratings), method: :patch) do |form| %>
    <%= form.label :value, 'Edit Rating' %>
    <%= form.select :value, (1..5).to_a %>
    <%= form.submit 'Update Rating' %>
  <% end %>
  
 
 Delete Rating button 
  <%= link_to 'Delete Rating', design_ratings_path(@design, @rating), method: :delete, data: { confirm: 'Are you sure?' } %> -->
  
  <% else %>
  <!-- New Rating form -->
  <%= form_with(model: [@design, Rating.new], url: design_ratings_path(@design), method: :design) do |form| %>
    <%= form.label :value, 'Rating' %>
    <%= form.select :value, (1..5).to_a %>
    <%= form.submit 'Submit Rating' %>
  <% end %>
<% end %>




<% if @design.likes.exists?(user: current_user) %>
  <%= button_to 'Unlike', design_like_path(@design, @design.likes.find_by(user: current_user)), method: :delete %>
<% else %>
  <%= button_to 'Like', design_likes_path(@design), method: :design  %>
<% end %>

  <%= link_to "Edit this design", edit_design_path(@design) %> |
  <%= link_to "Back to designs", designs_path %>

  <%= button_to "Destroy this design", @design, method: :delete %>
</div>
